{"ast":null,"code":"import React,{useState,useEffect}from'react';import{getAllStudents,getStudentById}from'../services/api';// Import the necessary API functions\nimport'./RetrieveStudent.css';// Ensure this CSS file exists for styling\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RetrieveStudent=()=>{const[students,setStudents]=useState([]);const[selectedStudent,setSelectedStudent]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[selectedId,setSelectedId]=useState('');// State to hold selected student ID\nuseEffect(()=>{const fetchStudents=async()=>{try{const result=await getAllStudents();// Call the API function to get all students\n// Since the result.data contains an array inside an array, access it properly\nif(result.data&&result.data.length>0&&Array.isArray(result.data[0])){setStudents(result.data[0]);// Set the student list from the inner array\n}else{setError('No students found.');}setLoading(false);}catch(error){console.error('Error fetching students:',error);setError('Error fetching students. Please try again later.');setLoading(false);}};fetchStudents();},[]);const handleSelectChange=async event=>{const id=event.target.value;setSelectedId(id);// Update the selected ID\nif(id){try{const result=await getStudentById(id);// Fetch student details by ID\n// Access the student data directly\nif(result.data){setSelectedStudent(result.data);// Set selected student details\nsetError('');// Clear any error message\n}else{setError('Student not found');setSelectedStudent(null);}}catch(error){console.error('Error fetching student:',error);setError('Error fetching student details. Please try again later.');setSelectedStudent(null);}}else{setSelectedStudent(null);// Clear selection if no ID\n}};if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});if(error)return/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error});return/*#__PURE__*/_jsxs(\"div\",{className:\"retrieve-student\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Retrieve Student\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"student-select\",children:\"Select Student: \"}),/*#__PURE__*/_jsxs(\"select\",{id:\"student-select\",value:selectedId,onChange:handleSelectChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a student\"}),students.map(student=>/*#__PURE__*/_jsx(\"option\",{value:student.id,children:student.fullname},student.id))]})]}),selectedStudent&&/*#__PURE__*/_jsxs(\"div\",{className:\"student-details\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Student Details\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Full Name:\"}),\" \",selectedStudent.fullname]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",selectedStudent.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Course of Study:\"}),\" \",selectedStudent.course_of_study]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Year:\"}),\" \",selectedStudent.year]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"GPA:\"}),\" \",selectedStudent.GPA]})]})]});};export default RetrieveStudent;","map":{"version":3,"names":["React","useState","useEffect","getAllStudents","getStudentById","jsx","_jsx","jsxs","_jsxs","RetrieveStudent","students","setStudents","selectedStudent","setSelectedStudent","loading","setLoading","error","setError","selectedId","setSelectedId","fetchStudents","result","data","length","Array","isArray","console","handleSelectChange","event","id","target","value","children","className","htmlFor","onChange","map","student","fullname","email","course_of_study","year","GPA"],"sources":["C:/Users/HarshKaushik/OneDrive/Desktop/student/gui/src/pages/RetrieveStudent.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { getAllStudents, getStudentById } from '../services/api'; // Import the necessary API functions\r\nimport './RetrieveStudent.css'; // Ensure this CSS file exists for styling\r\n\r\nconst RetrieveStudent = () => {\r\n  const [students, setStudents] = useState([]);\r\n  const [selectedStudent, setSelectedStudent] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [selectedId, setSelectedId] = useState(''); // State to hold selected student ID\r\n\r\n  useEffect(() => {\r\n    const fetchStudents = async () => {\r\n      try {\r\n        const result = await getAllStudents(); // Call the API function to get all students\r\n        \r\n        // Since the result.data contains an array inside an array, access it properly\r\n        if (result.data && result.data.length > 0 && Array.isArray(result.data[0])) {\r\n          setStudents(result.data[0]); // Set the student list from the inner array\r\n        } else {\r\n          setError('No students found.');\r\n        }\r\n        setLoading(false);\r\n      } catch (error) {\r\n        console.error('Error fetching students:', error);\r\n        setError('Error fetching students. Please try again later.');\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchStudents();\r\n  }, []);\r\n\r\n  const handleSelectChange = async (event) => {\r\n    const id = event.target.value;\r\n    setSelectedId(id); // Update the selected ID\r\n    if (id) {\r\n      try {\r\n        const result = await getStudentById(id); // Fetch student details by ID\r\n\r\n        // Access the student data directly\r\n        if (result.data) {\r\n          setSelectedStudent(result.data); // Set selected student details\r\n          setError(''); // Clear any error message\r\n        } else {\r\n          setError('Student not found');\r\n          setSelectedStudent(null);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching student:', error);\r\n        setError('Error fetching student details. Please try again later.');\r\n        setSelectedStudent(null);\r\n      }\r\n    } else {\r\n      setSelectedStudent(null); // Clear selection if no ID\r\n    }\r\n  };\r\n\r\n  if (loading) return <div>Loading...</div>;\r\n  if (error) return <div className=\"error-message\">{error}</div>;\r\n\r\n  return (\r\n    <div className=\"retrieve-student\">\r\n      <h2>Retrieve Student</h2>\r\n      <div>\r\n        <label htmlFor=\"student-select\">Select Student: </label>\r\n        <select id=\"student-select\" value={selectedId} onChange={handleSelectChange}>\r\n          <option value=\"\">Select a student</option>\r\n          {students.map((student) => (\r\n            <option key={student.id} value={student.id}>\r\n              {student.fullname}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n      {selectedStudent && (\r\n        <div className=\"student-details\">\r\n          <h3>Student Details</h3>\r\n          <p><strong>Full Name:</strong> {selectedStudent.fullname}</p>\r\n          <p><strong>Email:</strong> {selectedStudent.email}</p>\r\n          <p><strong>Course of Study:</strong> {selectedStudent.course_of_study}</p>\r\n          <p><strong>Year:</strong> {selectedStudent.year}</p>\r\n          <p><strong>GPA:</strong> {selectedStudent.GPA}</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RetrieveStudent;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}