{"ast":null,"code":"import React,{useState,useEffect}from'react';import{getAllStudents,updateStudent}from'../services/api';// Import necessary API functions\nimport'./UpdateStudent.css';// Ensure this CSS file exists for styling\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UpdateStudent=()=>{const[students,setStudents]=useState([]);const[selectedId,setSelectedId]=useState('');const[studentDetails,setStudentDetails]=useState({fullname:'',email:'',course_of_study:'',year:'',gpa:''});const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[message,setMessage]=useState('');useEffect(()=>{const fetchStudents=async()=>{try{const result=await getAllStudents();// Call the API function to get all students\nif(result.data.length>0){setStudents(result.data[0]);// Set the student list\n}setLoading(false);}catch(error){console.error('Error fetching students:',error);setError('Error fetching students. Please try again later.');setLoading(false);}};fetchStudents();},[]);useEffect(()=>{if(selectedId){const student=students.find(student=>student.id===selectedId);if(student){setStudentDetails(student);}}},[selectedId,students]);const handleInputChange=e=>{const{name,value}=e.target;setStudentDetails(prevDetails=>({...prevDetails,[name]:value}));};const handleUpdate=async()=>{if(!selectedId)return;try{await updateStudent(selectedId,studentDetails);// Call API function to update student\nsetMessage('Student updated successfully!');}catch(error){console.error('Error updating student:',error);setError('Error updating student. Please try again later.');}};if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});if(error)return/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error});return/*#__PURE__*/_jsxs(\"div\",{className:\"update-student\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Update Student\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"student-select\",children:\"Select Student: \"}),/*#__PURE__*/_jsxs(\"select\",{id:\"student-select\",value:selectedId,onChange:e=>setSelectedId(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a student\"}),students.map(student=>/*#__PURE__*/_jsx(\"option\",{value:student.id,children:student.fullname},student.id))]})]}),selectedId&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Full Name:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"fullname\",value:studentDetails.fullname,onChange:handleInputChange})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Email:\",/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:studentDetails.email,onChange:handleInputChange})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Course of Study:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"course_of_study\",value:studentDetails.course_of_study,onChange:handleInputChange})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Year:\",/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"year\",value:studentDetails.year,onChange:handleInputChange})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"GPA:\",/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",name:\"gpa\",value:studentDetails.gpa,onChange:handleInputChange})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUpdate,children:\"Update Student\"})]}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"message\",children:message})]});};export default UpdateStudent;","map":{"version":3,"names":["React","useState","useEffect","getAllStudents","updateStudent","jsx","_jsx","jsxs","_jsxs","UpdateStudent","students","setStudents","selectedId","setSelectedId","studentDetails","setStudentDetails","fullname","email","course_of_study","year","gpa","loading","setLoading","error","setError","message","setMessage","fetchStudents","result","data","length","console","student","find","id","handleInputChange","e","name","value","target","prevDetails","handleUpdate","children","className","htmlFor","onChange","map","type","step","onClick"],"sources":["C:/Users/HarshKaushik/OneDrive/Desktop/student/gui/src/pages/UpdateStudent.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { getAllStudents, updateStudent } from '../services/api'; // Import necessary API functions\r\nimport './UpdateStudent.css'; // Ensure this CSS file exists for styling\r\n\r\nconst UpdateStudent = () => {\r\n  const [students, setStudents] = useState([]);\r\n  const [selectedId, setSelectedId] = useState('');\r\n  const [studentDetails, setStudentDetails] = useState({\r\n    fullname: '',\r\n    email: '',\r\n    course_of_study: '',\r\n    year: '',\r\n    gpa: '',\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [message, setMessage] = useState('');\r\n\r\n  useEffect(() => {\r\n    const fetchStudents = async () => {\r\n      try {\r\n        const result = await getAllStudents(); // Call the API function to get all students\r\n        if (result.data.length > 0) {\r\n          setStudents(result.data[0]); // Set the student list\r\n        }\r\n        setLoading(false);\r\n      } catch (error) {\r\n        console.error('Error fetching students:', error);\r\n        setError('Error fetching students. Please try again later.');\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchStudents();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (selectedId) {\r\n      const student = students.find(student => student.id === selectedId);\r\n      if (student) {\r\n        setStudentDetails(student);\r\n      }\r\n    }\r\n  }, [selectedId, students]);\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setStudentDetails((prevDetails) => ({\r\n      ...prevDetails,\r\n      [name]: value,\r\n    }));\r\n  };\r\n\r\n  const handleUpdate = async () => {\r\n    if (!selectedId) return;\r\n    try {\r\n      await updateStudent(selectedId, studentDetails); // Call API function to update student\r\n      setMessage('Student updated successfully!');\r\n    } catch (error) {\r\n      console.error('Error updating student:', error);\r\n      setError('Error updating student. Please try again later.');\r\n    }\r\n  };\r\n\r\n  if (loading) return <div>Loading...</div>;\r\n  if (error) return <div className=\"error-message\">{error}</div>;\r\n\r\n  return (\r\n    <div className=\"update-student\">\r\n      <h2>Update Student</h2>\r\n      <div>\r\n        <label htmlFor=\"student-select\">Select Student: </label>\r\n        <select id=\"student-select\" value={selectedId} onChange={(e) => setSelectedId(e.target.value)}>\r\n          <option value=\"\">Select a student</option>\r\n          {students.map((student) => (\r\n            <option key={student.id} value={student.id}>\r\n              {student.fullname}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n      {selectedId && (\r\n        <div>\r\n          <label>\r\n            Full Name:\r\n            <input type=\"text\" name=\"fullname\" value={studentDetails.fullname} onChange={handleInputChange} />\r\n          </label>\r\n          <label>\r\n            Email:\r\n            <input type=\"email\" name=\"email\" value={studentDetails.email} onChange={handleInputChange} />\r\n          </label>\r\n          <label>\r\n            Course of Study:\r\n            <input type=\"text\" name=\"course_of_study\" value={studentDetails.course_of_study} onChange={handleInputChange} />\r\n          </label>\r\n          <label>\r\n            Year:\r\n            <input type=\"number\" name=\"year\" value={studentDetails.year} onChange={handleInputChange} />\r\n          </label>\r\n          <label>\r\n            GPA:\r\n            <input type=\"number\" step=\"0.1\" name=\"gpa\" value={studentDetails.gpa} onChange={handleInputChange} />\r\n          </label>\r\n          <button onClick={handleUpdate}>Update Student</button>\r\n        </div>\r\n      )}\r\n      {message && <div className=\"message\">{message}</div>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UpdateStudent;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}